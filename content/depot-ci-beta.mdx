---
title: Depot CI Beta setup and compatibility
ogTitle: Depot CI Beta setup and compatibility
description: Learn how to use Depot CI and understand compatibility with GitHub Actions.
---

**Depot CI is currently in beta. We are inviting a limited number of users to participate in the beta. If you're interested in participating, [please join the waitlist.](https://forms.gle/gVB8dwRkHFvJMNPm8)**

## Why are we building Depot CI?

We are building Depot CI to provide a faster, more reliable, and more feature-rich CI provider for this new world of software engineering we are all living in.

## The architecture of Depot CI

The general architecture idea behind Depot CI consists of three parts:

- The compute subsystem is responsible for executing the work that needs to be done. It receives the tasks to execute from the orchestrator, provisions the compute resources needed, and executes the work.

- The orchestrator subsystem schedules multi-step workflows across the fleet of compute, handles dependencies between tasks, and monitors progress.

- The GitHub Actions workflow parser takes an Actions-format YAML file and translates it into workflows for the orchestrator to process. It handles compatibility with how a regular Actions runner would execute a workflow, things like behavior, environment variables, and so on.

While Depot CI is currently executing Actions-format YAML, the entire system is programmable, which we intend to expose directly via an API. The plan is for Depot CI to support arbitrary frontends that can represent a CI workflow or pipeline, with direct API access to workflows, orchestration, and compute sandboxes.

## Where we are starting

In this initial beta release, we are starting with a single frontend: GitHub Actions workflows. The goal here is to make it as easy as possible to get started with Depot CI and to give us a way to test and iterate on the core functionality of the system.

Depot CI in this initial beta release is aimed to be a drop-in replacement for GitHub Actions that runs entirely within Depot. This means that you can use your existing GitHub Actions workflows and they will run within Depot CI.

## Getting started

For the beta, we **highly recommend** that you run Depot CI alongside GitHub Actions.

**Things are expected to break and we'll be iterating quickly. So please keep your GitHub Actions workflows running alongside Depot CI so that you don't end up blocked by a broken workflow.**

### Install the Depot Code Access app into your GitHub organization

If you've used Claude Code on Depot, you'll already have the Depot Code Access app installed in your GitHub organization.

1. Log in to your [Depot dashboard](/orgs).
2. Click **Settings**.
3. In the **GitHub Code Access** section, check for existing GitHub connections.
4. To connect another organization, click **Connect to GitHub**.
5. Follow the prompts to add the Depot Code Access app to your GitHub organization.

### Copy your workflows to a Depot folder

In your repository, copy the workflows and actions in your `.github` directory into a new `.depot` directory. Your workflows will run simultaneously in GitHub and Depot.

### Configure secrets

If your workflows use secrets (like `${{ secrets.NPM_TOKEN }}`), you'll need to configure them in Depot CI using the API. You'll need an [organization token](/docs/api/authentication) (`DEPOT_TOKEN`) to authenticate.

To add a secret:

```bash
curl -X POST https://api.depot.dev/depot.ci.v1.SecretService/AddSecret \
  -H "Authorization: Bearer ${DEPOT_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "NPM_TOKEN",
    "value": "npm_abc123..."
  }'
```

To add multiple secrets:

```bash
curl -X POST https://api.depot.dev/depot.ci.v1.SecretService/BatchAddSecrets \
  -H "Authorization: Bearer ${DEPOT_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "secrets": [
      {"name": "NPM_TOKEN", "value": "npm_abc123..."},
      {"name": "DATABASE_PASSWORD", "value": "super-secret"}
    ]
  }'
```

Your workflows can access secrets, but you can't read them via the API.

To add environment variables, for non-secret configuration, use the VariableService API (similar to SecretService). Variables are available via `${{ vars.VARIABLE_NAME }}` and can be read back through the API, unlike secrets.

### View your workflows

You can see and run your workflows from the [Workflows](/orgs/_/workflows) page of your Depot dashboard.

## Compatibility with GitHub Actions

We are keeping track of the GitHub Actions syntax, triggers, and configuration that we are compatible with. See below for the compatibility tables.

### Workflow-level configuration

Syntax and keys at the workflow level that are supported.

| **Field**                 | **Purpose**                                 | **Supported** | Notes                             |
| ------------------------- | ------------------------------------------- | ------------- | --------------------------------- |
| `name`                    | Workflow display name                       | ‚úÖ            |                                   |
| `run-name`                | Dynamic run title                           | ‚úÖ            |                                   |
| `on`                      | Workflow triggers                           | ‚úÖ            |                                   |
| `on.workflow_call`        | Reusable workflow definition                | ‚úÖ            |                                   |
| `on.workflow_call.inputs` | Reusable workflow inputs                    | ‚úÖ            |                                   |
| `permissions`             | Token scopes                                | üî®            | Done. With the exception of OIDC. |
| `env`                     | Workflow environment variables              | ‚úÖ            |                                   |
| `defaults`                | Default settings (shell, working-directory) | ‚úÖ            |                                   |
| `concurrency`             | Concurrency control                         | üî®            | In progress                       |
| `jobs`                    | Jobs definition                             | ‚úÖ            |                                   |

### Triggers (`on.*`)

Triggers that can kick off a Depot CI workflow today.

| **Field**                        | **Event type**                                     | **Supported** | Notes |
| -------------------------------- | -------------------------------------------------- | ------------- | ----- |
| `on.<event_name>`                | Event triggers                                     | ‚úÖ            |       |
| `on.<event_name>.types`          | Event trigger types                                | ‚úÖ            |       |
| `on.push.branches`               | Push branch filters                                | ‚úÖ            |       |
| `on.push.tags`                   | Push tag filters                                   | ‚úÖ            |       |
| `on.pull_request`                | GitHub specific event trigger                      | ‚úÖ            |       |
| `on.pull_request.branches`       | PR branch filters                                  | ‚úÖ            |       |
| `on.pull_request_target`         | GitHub specific event trigger                      | ‚úÖ            |       |
| `on.*.paths`                     | Path filters                                       | ‚úÖ            |       |
| `on.schedule`                    | Cron schedule triggers                             | ‚úÖ            |       |
| `on.workflow_call.inputs.*`      | Reusable workflow inputs (type, default, required) | ‚úÖ            |       |
| `on.workflow_call.outputs`       | Reusable workflow outputs                          | ‚úÖ            |       |
| `on.workflow_call.secrets`       | Reusable workflow secrets definition               | ‚úÖ            |       |
| `on.workflow_run`                | Workflow run triggers                              | ‚úÖ            |       |
| `on.workflow_dispatch`           | Manual dispatch triggers                           | ‚úÖ            |       |
| `on.workflow_dispatch.inputs`    | Manual dispatch inputs                             | ‚úÖ            |       |
| `on.branch_protection_rule`      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.check_run`                   | GitHub specific event trigger                      | ‚ùå            |       |
| `on.check_suite`                 | GitHub specific event trigger                      | ‚ùå            |       |
| `on.create`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.delete`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.deployment`                  | GitHub specific event trigger                      | ‚ùå            |       |
| `on.deployment_status`           | GitHub specific event trigger                      | ‚ùå            |       |
| `on.discussion`                  | GitHub specific event trigger                      | ‚ùå            |       |
| `on.discussion_comment`          | GitHub specific event trigger                      | ‚ùå            |       |
| `on.fork`                        | GitHub specific event trigger                      | ‚ùå            |       |
| `on.gollum`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.image_version`               | GitHub specific event trigger                      | ‚ùå            |       |
| `on.issue_comment`               | GitHub specific event trigger                      | ‚ùå            |       |
| `on.issues`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.label`                       | GitHub specific event trigger                      | ‚ùå            |       |
| `on.merge_group`                 | GitHub specific event trigger                      | ‚ùå            |       |
| `on.milestone`                   | GitHub specific event trigger                      | ‚ùå            |       |
| `on.page_build`                  | GitHub specific event trigger                      | ‚ùå            |       |
| `on.public`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.pull_request_comment`        | GitHub specific event trigger                      | ‚ùå            |       |
| `on.pull_request_review`         | GitHub specific event trigger                      | ‚ùå            |       |
| `on.pull_request_review_comment` | GitHub specific event trigger                      | ‚ùå            |       |
| `registry_package`               | GitHub specific event trigger                      | ‚ùå            |       |
| `on.release`                     | GitHub specific event trigger                      | ‚ùå            |       |
| `on.repository_dispatch`         | GitHub specific event trigger                      | ‚ùå            |       |
| `on.status`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.watch`                       | GitHub specific event trigger                      | ‚ùå            |       |

### Job-level configuration (`jobs.<job_id>.*`)

Job level syntax and keys that are supported.

| **Field**                             | **Purpose**                           | **Supported** | Notes                              |
| ------------------------------------- | ------------------------------------- | ------------- | ---------------------------------- |
| `jobs.<job_id>`                       | Job definition                        | ‚úÖ            |                                    |
| `jobs.<job_id>.name`                  | Job display name                      | ‚úÖ            |                                    |
| `jobs.<job_id>.needs`                 | Job dependencies / DAG                | ‚úÖ            |                                    |
| `jobs.<job_id>.if`                    | Conditional job execution             | ‚úÖ            |                                    |
| `jobs.<job_id>.runs-on`               | Runner selection                      | ‚ùå            |                                    |
| `jobs.<job_id>.permissions`           | Job-scoped permissions                | ‚ùå            |                                    |
| `jobs.<job_id>.environment`           | Deployment environments               | ‚ùå            |                                    |
| `jobs.<job_id>.concurrency`           | Job-level concurrency                 | üî®            | In progress                        |
| `jobs.<job_id>.outputs`               | Job outputs / cross-job data          | ‚úÖ            |                                    |
| `jobs.<job_id>.env`                   | Job environment variables             | ‚úÖ            |                                    |
| `jobs.<job_id>.defaults`              | Job default settings                  | ‚úÖ            |                                    |
| `jobs.<job_id>.timeout-minutes`       | Job timeout                           | ‚úÖ            |                                    |
| `jobs.<job_id>.strategy`              | Matrix strategy                       | ‚úÖ            |                                    |
| `jobs.<job_id>.[strategy.fail]`       | Matrix fail-fast                      | ‚úÖ            |                                    |
| `jobs.<job_id>.strategy.max-parallel` | Matrix parallel limit                 | ‚úÖ            |                                    |
| `jobs.<job_id>.continue-on-error`     | Allow job failure                     | ‚úÖ            |                                    |
| `jobs.<job_id>.container`             | Job container                         | ‚úÖ            |                                    |
| `jobs.<job_id>.services`              | Service containers                    | ‚úÖ            |                                    |
| `jobs.<job_id>.uses`                  | Reusable workflow call                | ‚úÖ            |                                    |
| `jobs.<job_id>.with`                  | Reusable workflow inputs              | ‚úÖ            |                                    |
| `jobs.<job_id>.secrets`               | Reusable workflow secrets             | ‚úÖ            |                                    |
| `jobs.<job_id>.secrets.inherit`       | Inherit all secrets                   | ‚úÖ            |                                    |
| `jobs.<job_id>.steps`                 | Step definitions                      | ‚úÖ            |                                    |
| `jobs.<job_id>.snapshot`              | Custom runner images (larger runners) | ‚ùå            | We'll have our own implementation. |

### Step-level configuration

| **Field**                    | **Purpose**                     | **Supported** | Notes |
| ---------------------------- | ------------------------------- | ------------- | ----- |
| `steps[*].id`                | Step identifier                 | ‚úÖ            |       |
| `steps[*].name`              | Step display name               | ‚úÖ            |       |
| `steps[*].if`                | Conditional step execution      | ‚úÖ            |       |
| `steps[*].uses`              | Action reference                | ‚úÖ            |       |
| `steps[*].run`               | Shell command execution         | ‚úÖ            |       |
| `steps[*].shell`             | Shell type (bash, pwsh, python) | ‚úÖ            |       |
| `steps[*].with`              | Action inputs                   | ‚úÖ            |       |
| `steps[*].env`               | Step environment variables      | ‚úÖ            |       |
| `steps[*].working-directory` | Step working directory          | ‚úÖ            |       |
| `steps[*].continue-on-error` | Allow step failure              | ‚úÖ            |       |
| `steps[*].timeout-minutes`   | Step timeout                    | ‚úÖ            |       |

### Expressions

Expression contexts that are supported today.

| **Context** | **Purpose**                | **Supported** | Notes |
| ----------- | -------------------------- | ------------- | ----- |
| `github`    | Event payload, repo, actor | ‚úÖ            |       |
| `env`       | Environment variables      | ‚úÖ            |       |
| `vars`      | Repository/org variables   | ‚úÖ            |       |
| `secrets`   | Secret values              | ‚úÖ            |       |
| `needs`     | Dependent job outputs      | ‚úÖ            |       |
| `strategy`  | Matrix strategy info       | ‚úÖ            |       |
| `matrix`    | Current matrix values      | ‚úÖ            |       |
| `steps`     | Prior step outputs         | ‚úÖ            |       |
| `job`       | Current job info           | ‚úÖ            |       |
| `runner`    | Runner info                | ‚úÖ            |       |
| `inputs`    | Workflow inputs            | ‚úÖ            |       |

#### Expression functions

Expression functions that are supported today.

| **Function**   | **Purpose**              | **Supported** | Notes |
| -------------- | ------------------------ | ------------- | ----- |
| `always()`     | Run regardless of status | ‚úÖ            |       |
| `success()`    | Run if no failures       | ‚úÖ            |       |
| `failure()`    | Run if any failure       | ‚úÖ            |       |
| `cancelled()`  | Run if cancelled         | ‚úÖ            |       |
| `hashFiles()`  | File hashing for caching | üî®            |       |
| `contains()`   | String/array contains    | ‚úÖ            |       |
| `startsWith()` | String prefix check      | ‚úÖ            |       |
| `endsWith()`   | String suffix check      | ‚úÖ            |       |
| `format()`     | String formatting        | ‚úÖ            |       |
| `join()`       | Array to string          | ‚úÖ            |       |
| `toJSON()`     | Object to JSON           | ‚úÖ            |       |
| `fromJSON()`   | JSON to object           | ‚úÖ            |       |

### Supported action types

| **Type**   | **Description**          | **Supported** | Notes |
| ---------- | ------------------------ | ------------- | ----- |
| JavaScript | Node 12/16/20/24 actions | ‚úÖ            |       |
| Composite  | Composite actions        | ‚úÖ            |       |
| Docker     | Container actions        | ‚úÖ            |       |

## Unsupported features and current limitations

This section highlights features that are not supported today with Depot CI.

### Reusable workflows from other repositories

We don't support reusing workflows from other repositories using the `uses` key.

### Pull request workflows triggered from forks

GitHub allows `pull_request` workflows to run when triggered from forked repositories. We don't support this today but plan to support it.

### Pull requests target workflows triggered from forks

GitHub allows `pull_request_target` workflows to run when triggered from forked repositories. We don't support this today but plan to support it.

### Snapshotting and custom images

We'll have our own implementation for snapshotting and using snapshots.

### Events triggering workflows

We currently support a subset of events that trigger workflows: `push`, `pull_request`, `pull_request_target`, `schedule`, `workflow_call`, `workflow_dispatch`, `workflow_run`.

### Non ubuntu labels

We currently support only the Depot `runs-on` labels. We treat any labels we can't decipher as `depot_ubuntu_latest`.

### Concurrency groups

Not supported in the beta yet.

### OIDC

Not supported in the beta yet. We're currently adding this functionality.

### Permissions

Today we support and respect the following permissions: `actions`, `checks`, `contents`, `metadata`, `pull_requests`, `statuses`, `workflows`. Notably, `id-token` requires OIDC and isn't supported yet.

### Hierarchical secrets and environment variables

Today, secrets and environment variables are not hierarchical. They are scoped only to your Depot organization, which means you can't set different values for the same secret across different repositories.
