---
title: Depot CI Beta setup and compatibility
ogTitle: Depot CI Beta setup and compatibility
description: Learn how to use Depot CI and understand compatibility with GitHub Actions.
---

**Depot CI is currently in beta. We are inviting a limited number of users to participate in the beta. If you're interested in participating, [please join the waitlist.](https://forms.gle/gVB8dwRkHFvJMNPm8)**

## Why are we building Depot CI?

We are building Depot CI to provide a faster, more reliable, and more feature-rich CI provider for this new world of software engineering we are all living in.

## The architecture of Depot CI

The general architecture idea behind Depot CI consists of three parts:

- The compute subsystem is responsible for executing the work that needs to be done. It receives the tasks to execute from the orchestrator, provisions the compute resources needed, and executes the work.

- The orchestrator subsystem schedules multi-step workflows across the fleet of compute, handles dependencies between tasks, and monitors progress.

- The GitHub Actions workflow parser takes an Actions-format YAML file and translates it into workflows for the orchestrator to process. It handles compatibility with how a regular Actions runner would execute a workflow, things like behavior, environment variables, and so on.

While Depot CI currently executes Actions-format YAML, the entire system is programmable, which we intend to expose directly via an API. The plan is for Depot CI to support arbitrary frontends that can represent a CI workflow or pipeline, with direct API access to workflows, orchestration, and compute sandboxes.

## Where we are starting

In this initial beta release, we are starting with a single frontend: GitHub Actions workflows. The goal here is to make it as easy as possible for you to get started with Depot CI while we test and iterate on the core functionality of the system.

Depot CI in this initial beta release is aimed to be a drop-in replacement for GitHub Actions that runs entirely within Depot. This means that you can use your existing GitHub Actions workflows and they will run within Depot CI.

## Getting started

For the beta, we **highly recommend** that you run Depot CI alongside GitHub Actions.

**Things are expected to break and we'll be iterating quickly. So please keep your GitHub Actions workflows running alongside Depot CI so that you don't end up blocked by a broken workflow.**

### Install the Depot Code Access app into your GitHub organization

If you've used Claude Code on Depot, you'll already have the Depot Code Access app installed in your GitHub organization.

1. Log in to your [Depot dashboard](/orgs).
2. Click **Settings**.
3. In the **GitHub Code Access** section, check for existing GitHub connections.
4. To connect another organization, click **Connect to GitHub**.
5. Follow the prompts to add the Depot Code Access app to your GitHub organization.

### Migrate workflows and configure secrets

The `depot ci migrate` command automates getting started with Depot CI. It launches an interactive wizard that discovers your GitHub Actions workflows, analyzes them for Depot CI compatibility, copies your selected workflows to `.depot/`, and prompts you to configure any referenced secrets and variables.

Your original `.github/` directory is left as-is, so your GitHub Actions workflows continue running in parallel while you test Depot CI.

**Note**: Your workflows will run simultaneously in GitHub and Depot. Be mindful of workflows that cause changes in external systems, for example that trigger a deploy or update an important artifact, because they will execute twice.

From the root of your repository, run:

```bash
depot ci migrate
```

| Flag                 | Description                                                                            |
| -------------------- | -------------------------------------------------------------------------------------- |
| `--yes`              | Run in non-interactive mode, migrating all discovered workflows automatically          |
| `--secret KEY=VALUE` | Pre-supply a secret value; can be repeated for multiple secrets                        |
| `--var KEY=VALUE`    | Pre-supply a variable value; can be repeated for multiple variables                    |
| `--overwrite`        | Overwrite an existing `.depot/` directory without prompting                            |
| `--org <id>`         | Specify a Depot organization ID (required if you belong to more than one organization) |
| `--token <token>`    | Depot API token                                                                        |

For a full description of how the `migrate` command works, see the [CLI reference](#migrate-workflows-with-the-depot-cli).

You can use the Depot CLI to manage [secrets](#manage-secrets-with-the-depot-cli) and [variables](#manage-variables-with-the-depot-cli) after you migrate.

## Manage your workflows

View and manage your workflows from the [Workflows](/orgs/_/workflows) page of your Depot dashboard.

You can also use the Depot CLI to:

- [list runs](#list-ci-runs-with-the-depot-cli)
- [run a workflow or job](#run-a-workflow-with-the-depot-cli)
- [check the status of a run](#check-ci-run-status-with-the-depot-cli)
- [fetch job logs](#fetch-ci-job-logs-with-the-depot-cli).

## Compatibility with GitHub Actions

We are keeping track of the GitHub Actions syntax, triggers, and configuration that we are compatible with. See the following compatibility tables.

### Workflow-level configuration

Syntax and keys at the workflow level that are supported.

| **Field**                 | **Purpose**                                 | **Supported** | Notes                             |
| ------------------------- | ------------------------------------------- | ------------- | --------------------------------- |
| `name`                    | Workflow display name                       | ‚úÖ            |                                   |
| `run-name`                | Dynamic run title                           | ‚úÖ            |                                   |
| `on`                      | Workflow triggers                           | ‚úÖ            |                                   |
| `on.workflow_call`        | Reusable workflow definition                | ‚úÖ            |                                   |
| `on.workflow_call.inputs` | Reusable workflow inputs                    | ‚úÖ            |                                   |
| `permissions`             | Token scopes                                | üî®            | Done. With the exception of OIDC. |
| `env`                     | Workflow environment variables              | ‚úÖ            |                                   |
| `defaults`                | Default settings (shell, working-directory) | ‚úÖ            |                                   |
| `concurrency`             | Concurrency control                         | üî®            | In progress                       |
| `jobs`                    | Jobs definition                             | ‚úÖ            |                                   |

### Triggers (`on.*`)

Triggers that can kick off a Depot CI workflow today.

| **Field**                        | **Event type**                                     | **Supported** | Notes |
| -------------------------------- | -------------------------------------------------- | ------------- | ----- |
| `on.<event_name>`                | Event triggers                                     | ‚úÖ            |       |
| `on.<event_name>.types`          | Event trigger types                                | ‚úÖ            |       |
| `on.push.branches`               | Push branch filters                                | ‚úÖ            |       |
| `on.push.tags`                   | Push tag filters                                   | ‚úÖ            |       |
| `on.pull_request`                | GitHub specific event trigger                      | ‚úÖ            |       |
| `on.pull_request.branches`       | PR branch filters                                  | ‚úÖ            |       |
| `on.pull_request_target`         | GitHub specific event trigger                      | ‚úÖ            |       |
| `on.*.paths`                     | Path filters                                       | ‚úÖ            |       |
| `on.schedule`                    | Cron schedule triggers                             | ‚úÖ            |       |
| `on.workflow_call.inputs.*`      | Reusable workflow inputs (type, default, required) | ‚úÖ            |       |
| `on.workflow_call.outputs`       | Reusable workflow outputs                          | ‚úÖ            |       |
| `on.workflow_call.secrets`       | Reusable workflow secrets definition               | ‚úÖ            |       |
| `on.workflow_run`                | Workflow run triggers                              | ‚úÖ            |       |
| `on.workflow_dispatch`           | Manual dispatch triggers                           | ‚úÖ            |       |
| `on.workflow_dispatch.inputs`    | Manual dispatch inputs                             | ‚úÖ            |       |
| `on.branch_protection_rule`      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.check_run`                   | GitHub specific event trigger                      | ‚ùå            |       |
| `on.check_suite`                 | GitHub specific event trigger                      | ‚ùå            |       |
| `on.create`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.delete`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.deployment`                  | GitHub specific event trigger                      | ‚ùå            |       |
| `on.deployment_status`           | GitHub specific event trigger                      | ‚ùå            |       |
| `on.discussion`                  | GitHub specific event trigger                      | ‚ùå            |       |
| `on.discussion_comment`          | GitHub specific event trigger                      | ‚ùå            |       |
| `on.fork`                        | GitHub specific event trigger                      | ‚ùå            |       |
| `on.gollum`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.image_version`               | GitHub specific event trigger                      | ‚ùå            |       |
| `on.issue_comment`               | GitHub specific event trigger                      | ‚ùå            |       |
| `on.issues`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.label`                       | GitHub specific event trigger                      | ‚ùå            |       |
| `on.merge_group`                 | GitHub specific event trigger                      | ‚ùå            |       |
| `on.milestone`                   | GitHub specific event trigger                      | ‚ùå            |       |
| `on.page_build`                  | GitHub specific event trigger                      | ‚ùå            |       |
| `on.public`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.pull_request_comment`        | GitHub specific event trigger                      | ‚ùå            |       |
| `on.pull_request_review`         | GitHub specific event trigger                      | ‚ùå            |       |
| `on.pull_request_review_comment` | GitHub specific event trigger                      | ‚ùå            |       |
| `on.registry_package`            | GitHub specific event trigger                      | ‚ùå            |       |
| `on.release`                     | GitHub specific event trigger                      | ‚ùå            |       |
| `on.repository_dispatch`         | GitHub specific event trigger                      | ‚ùå            |       |
| `on.status`                      | GitHub specific event trigger                      | ‚ùå            |       |
| `on.watch`                       | GitHub specific event trigger                      | ‚ùå            |       |

### Job-level configuration (`jobs.<job_id>.*`)

Job level syntax and keys that are supported.

| **Field**                             | **Purpose**                           | **Supported** | Notes                                                                               |
| ------------------------------------- | ------------------------------------- | ------------- | ----------------------------------------------------------------------------------- |
| `jobs.<job_id>`                       | Job definition                        | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.name`                  | Job display name                      | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.needs`                 | Job dependencies / DAG                | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.if`                    | Conditional job execution             | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.runs-on`               | Runner selection                      | ‚ùå            | We respect Depot runner labels and treat non-Depot labels as `depot-ubuntu-latest`. |
| `jobs.<job_id>.permissions`           | Job-scoped permissions                | ‚ùå            |                                                                                     |
| `jobs.<job_id>.environment`           | Deployment environments               | ‚ùå            |                                                                                     |
| `jobs.<job_id>.concurrency`           | Job-level concurrency                 | üî®            | In progress                                                                         |
| `jobs.<job_id>.outputs`               | Job outputs / cross-job data          | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.env`                   | Job environment variables             | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.defaults`              | Job default settings                  | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.timeout-minutes`       | Job timeout                           | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.strategy`              | Matrix strategy                       | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.[strategy.fail]`       | Matrix fail-fast                      | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.strategy.max-parallel` | Matrix parallel limit                 | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.continue-on-error`     | Allow job failure                     | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.container`             | Job container                         | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.services`              | Service containers                    | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.uses`                  | Reusable workflow call                | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.with`                  | Reusable workflow inputs              | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.secrets`               | Reusable workflow secrets             | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.secrets.inherit`       | Inherit all secrets                   | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.steps`                 | Step definitions                      | ‚úÖ            |                                                                                     |
| `jobs.<job_id>.snapshot`              | Custom runner images (larger runners) | ‚ùå            | Custom implementation planned.                                                      |

### Step-level configuration

| **Field**                    | **Purpose**                     | **Supported** | Notes |
| ---------------------------- | ------------------------------- | ------------- | ----- |
| `steps[*].id`                | Step identifier                 | ‚úÖ            |       |
| `steps[*].name`              | Step display name               | ‚úÖ            |       |
| `steps[*].if`                | Conditional step execution      | ‚úÖ            |       |
| `steps[*].uses`              | Action reference                | ‚úÖ            |       |
| `steps[*].run`               | Shell command execution         | ‚úÖ            |       |
| `steps[*].shell`             | Shell type (bash, pwsh, python) | ‚úÖ            |       |
| `steps[*].with`              | Action inputs                   | ‚úÖ            |       |
| `steps[*].env`               | Step environment variables      | ‚úÖ            |       |
| `steps[*].working-directory` | Step working directory          | ‚úÖ            |       |
| `steps[*].continue-on-error` | Allow step failure              | ‚úÖ            |       |
| `steps[*].timeout-minutes`   | Step timeout                    | ‚úÖ            |       |

### Expressions

Expression contexts that are supported today.

| **Context** | **Purpose**                | **Supported** | Notes |
| ----------- | -------------------------- | ------------- | ----- |
| `github`    | Event payload, repo, actor | ‚úÖ            |       |
| `env`       | Environment variables      | ‚úÖ            |       |
| `vars`      | Repository/org variables   | ‚úÖ            |       |
| `secrets`   | Secret values              | ‚úÖ            |       |
| `needs`     | Dependent job outputs      | ‚úÖ            |       |
| `strategy`  | Matrix strategy info       | ‚úÖ            |       |
| `matrix`    | Current matrix values      | ‚úÖ            |       |
| `steps`     | Prior step outputs         | ‚úÖ            |       |
| `job`       | Current job info           | ‚úÖ            |       |
| `runner`    | Runner info                | ‚úÖ            |       |
| `inputs`    | Workflow inputs            | ‚úÖ            |       |

#### Expression functions

Expression functions that are supported today.

| **Function**   | **Purpose**              | **Supported** | Notes |
| -------------- | ------------------------ | ------------- | ----- |
| `always()`     | Run regardless of status | ‚úÖ            |       |
| `success()`    | Run if no failures       | ‚úÖ            |       |
| `failure()`    | Run if any failure       | ‚úÖ            |       |
| `cancelled()`  | Run if cancelled         | ‚úÖ            |       |
| `hashFiles()`  | File hashing for caching | üî®            |       |
| `contains()`   | String/array contains    | ‚úÖ            |       |
| `startsWith()` | String prefix check      | ‚úÖ            |       |
| `endsWith()`   | String suffix check      | ‚úÖ            |       |
| `format()`     | String formatting        | ‚úÖ            |       |
| `join()`       | Array to string          | ‚úÖ            |       |
| `toJSON()`     | Object to JSON           | ‚úÖ            |       |
| `fromJSON()`   | JSON to object           | ‚úÖ            |       |

### Supported action types

| **Type**   | **Description**          | **Supported** | Notes |
| ---------- | ------------------------ | ------------- | ----- |
| JavaScript | Node 12/16/20/24 actions | ‚úÖ            |       |
| Composite  | Composite actions        | ‚úÖ            |       |
| Docker     | Container actions        | ‚úÖ            |       |

## Unsupported features and current limitations

This section describes features that are not supported today with Depot CI.

### Reusable workflows from other repositories

We don't support reusing workflows from other repositories using the `uses` key. You can still use the `uses` key to reference actions from the Marketplace, for example `uses: action/checkout@v1`.

### Pull request workflows triggered from forks

GitHub allows `pull_request` workflows to run when triggered from forked repositories. We don't support this today but plan to support it.

### Pull requests target workflows triggered from forks

GitHub allows `pull_request_target` workflows to run when triggered from forked repositories. We don't support this today but plan to support it.

### Snapshotting and custom images

We'll have our own implementation for snapshotting and using snapshots.

### Events triggering workflows

We currently support a subset of events that trigger workflows: `push`, `pull_request`, `pull_request_target`, `schedule`, `workflow_call`, `workflow_dispatch`, `workflow_run`.

### Non ubuntu labels

We currently support only the Depot `runs-on` labels. We treat any labels we can't decipher as `depot-ubuntu-latest`.

### Concurrency groups

Not supported in the beta yet.

### OIDC

Not supported in the beta yet. We're currently adding this functionality.

### Permissions

Today we support and respect the following permissions: `actions`, `checks`, `contents`, `metadata`, `pull_requests`, `statuses`, `workflows`. Notably, `id-token` requires OIDC and isn't supported yet.

### Hierarchical secrets and variables

Today, secrets and variables are not hierarchical. They are scoped only to your Depot organization, which means you can't set different values for the same secret across different repositories.

## Depot CLI usage and reference

### Migrate workflows with the Depot CLI

The `depot ci migrate` command automates migrating to Depot CI. To get started with Depot CI, see [Get started](#getting-started).

```bash
depot ci migrate
```

The command does the following:

1. Discovers all workflow files in `.github/workflows/`.
2. Analyzes each workflow for compatibility with Depot CI.
3. Prompts you to select which workflows to migrate.
4. Creates a `.depot/` directory and copies selected workflows (and any local actions from `.github/actions/`) there.
5. Detects secrets and variables referenced in the selected workflows and prompts you to enter their values.

#### `migrate` flags

| Flag                 | Description                                                                            |
| -------------------- | -------------------------------------------------------------------------------------- |
| `--yes`              | Run in non-interactive mode, migrating all discovered workflows automatically          |
| `--secret KEY=VALUE` | Pre-supply a secret value; can be repeated for multiple secrets                        |
| `--var KEY=VALUE`    | Pre-supply a variable value; can be repeated for multiple variables                    |
| `--overwrite`        | Overwrite an existing `.depot/` directory without prompting                            |
| `--org <id>`         | Specify a Depot organization ID (required if you belong to more than one organization) |
| `--token <token>`    | Depot API token                                                                        |

#### Non-interactive mode

Use `--yes` to run the migration without any prompts. Combine it with `--secret` and `--var` flags to supply secret and variable values. For example:

```bash
depot ci migrate --yes \
  --secret NPM_TOKEN=npm_abc123 \
  --secret DATABASE_URL=postgres://... \
  --var SERVICE_NAME=api \
  --org my-org-id
```

If a workflow references a secret or variable that you haven't supplied via the `--secret` or `--var` flags, the migration completes with a warning. You can add missing secrets and variables later with the `depot ci secrets add` or `depot ci vars add` commands, or via the API.

#### Compatibility analysis

Before copying any files, the wizard analyzes each workflow for features that Depot CI doesn't yet support.

The wizard shows a summary of issues for each workflow:

- **No issues**: The workflow is fully compatible and safe to migrate.
- **Warnings**: Features are partially supported. The workflow will run but behavior may differ from GitHub Actions.
- **Critical issues**: Features are unsupported. The workflow is unlikely to run correctly in Depot CI today.

For a full list of compatible syntax, triggers, and configuration, see [Compatibility with GitHub Actions](#compatibility-with-github-actions).

#### What gets copied

The migration copies the following into your `.depot/` directory:

| Source                             | Destination                       |
| ---------------------------------- | --------------------------------- |
| `.github/workflows/<selected>.yml` | `.depot/workflows/<selected>.yml` |
| `.github/actions/`                 | `.depot/actions/`                 |

### Manage secrets with the Depot CLI

Use the `depot ci secrets` commands to add, list, and remove secrets for your Depot CI workflows from the command line, as an alternative to the API.

#### Add a secret

```bash
depot ci secrets add SECRET_NAME
```

If you omit `--value`, the CLI prompts you to enter the value securely (input is hidden).

| Flag                   | Description                              |
| ---------------------- | ---------------------------------------- |
| `--value <value>`      | Secret value                             |
| `--description <text>` | Human-readable description of the secret |
| `--org <id>`           | Organization ID                          |
| `--token <token>`      | Depot API token                          |

#### List secrets

```bash
depot ci secrets list
```

Displays names and metadata (no values) for all secrets configured for your organization.

| Flag              | Description                       |
| ----------------- | --------------------------------- |
| `--output json`   | Output as JSON instead of a table |
| `--org <id>`      | Organization ID                   |
| `--token <token>` | Depot API token                   |

#### Remove a secret

```bash
depot ci secrets remove SECRET_NAME [SECRET_NAME...]
```

Alias: `depot ci secrets rm`. Accepts one or more secret names. Prompts for confirmation before deleting. Use `--force` to skip the prompt.

```bash
# Remove a single secret
depot ci secrets remove MY_API_KEY

# Remove multiple secrets at once
depot ci secrets remove GITHUB_TOKEN MY_API_KEY DATABASE_URL

# Remove without confirmation
depot ci secrets remove GITHUB_TOKEN MY_API_KEY --force
```

| Flag              | Description              |
| ----------------- | ------------------------ |
| `--force`         | Skip confirmation prompt |
| `--org <id>`      | Organization ID          |
| `--token <token>` | Depot API token          |

### Manage variables with the Depot CLI

Variables are non-secret configuration values available in workflows as `${{ vars.VARIABLE_NAME }}`. Unlike secrets, variable values can be read back through the API or CLI.

The `depot ci vars` commands mirror the secrets commands.

#### Add a variable

```bash
depot ci vars add VAR_NAME --value "some-value"
```

If you omit `--value`, the CLI prompts you to enter the value.

| Flag              | Description     |
| ----------------- | --------------- |
| `--value <value>` | Variable value  |
| `--org <id>`      | Organization ID |
| `--token <token>` | Depot API token |

#### List variables

```bash
depot ci vars list
```

| Flag              | Description                       |
| ----------------- | --------------------------------- |
| `--output json`   | Output as JSON instead of a table |
| `--org <id>`      | Organization ID                   |
| `--token <token>` | Depot API token                   |

#### Remove a variable

```bash
depot ci vars remove VAR_NAME [VAR_NAME...]
```

Alias: `depot ci vars rm`. Accepts one or more variable names. Prompts for confirmation before deleting. Use `--force` to skip the prompt.

```bash
# Remove a single variable
depot ci vars remove GITHUB_REPO

# Remove multiple variables at once
depot ci vars remove GITHUB_REPO MY_SERVICE_NAME DEPLOY_ENV

# Remove without confirmation
depot ci vars remove GITHUB_REPO MY_SERVICE_NAME --force
```

| Flag              | Description              |
| ----------------- | ------------------------ |
| `--force`         | Skip confirmation prompt |
| `--org <id>`      | Organization ID          |
| `--token <token>` | Depot API token          |

### Run a workflow locally with the Depot CLI

Use `depot ci run` to run a CI workflow against your local working tree without pushing to GitHub first. It's the fastest way to test a workflow against changes you're actively working on.

The `depot ci run` command submits a local workflow YAML file to the Depot CI API and starts a run. If you have uncommitted changes relative to the default branch, the CLI automatically detects them, uploads a patch to Depot Cache, and injects a step into each selected job to apply the patch after checkout. The run reflects your local working state without requiring a push.

#### Run a workflow

From the root of your repository, run:

```bash
depot ci run --workflow .depot/workflows/ci.yml
```

The command does the following:

1. Reads and parses the workflow YAML file.
2. Detects any uncommitted changes by comparing your working tree against the merge base with the default branch.
3. If changes exist, uploads a patch to Depot Cache and injects a patch-application step after `actions/checkout` in each selected job.
4. Submits the workflow to the Depot CI API and prints the resulting org ID and run ID.

#### `run` flags

| Flag                   | Description                                                                                         |
| ---------------------- | --------------------------------------------------------------------------------------------------- |
| `--workflow <path>`    | Path to the workflow YAML file (required)                                                           |
| `--job <name>`         | Job name to run; can be repeated to select multiple jobs. Omit to run all jobs.                     |
| `--ssh-after-step <n>` | Insert an SSH debug session (via tmate) after the nth step (1-based). Requires exactly one `--job`. |
| `--org <id>`           | Organization ID (required when user is a member of multiple organizations)                          |
| `--token <token>`      | Depot API token                                                                                     |

#### Run specific jobs

Pass `--job` one or more times to run a subset of the jobs defined in the workflow:

```bash
depot ci run --workflow .depot/workflows/ci.yml --job build --job test
```

Jobs not listed are excluded from the submitted workflow. If a requested job name does not exist in the workflow, the command exits with an error listing the available jobs.

#### Debug with SSH

Use `--ssh-after-step` to insert a [tmate](https://github.com/mxschmitt/action-tmate) debug session after a specific step in a single job. This lets you SSH into the runner at that point in the workflow to inspect state interactively.

```bash
depot ci run --workflow .depot/workflows/ci.yml --job build --ssh-after-step 3
```

`--ssh-after-step` requires exactly one `--job` to be specified.

### List CI runs with the Depot CLI

Use `depot ci run list` to list CI runs for your organization. By default it returns the 50 most recent queued and running runs.

#### List runs

```bash
depot ci run list
```

Alias: `depot ci run ls`.

| Flag                | Description                                                                                       |
| ------------------- | ------------------------------------------------------------------------------------------------- |
| `--status <status>` | Filter by status; can be repeated. Values: `queued`, `running`, `finished`, `failed`, `cancelled` |
| `-n <number>`       | Number of runs to return (default: `50`)                                                          |
| `--output json`     | Output as JSON instead of a table                                                                 |
| `--org <id>`        | Organization ID (required when user is a member of multiple organizations)                        |
| `--token <token>`   | Depot API token                                                                                   |

#### Filter by status

```bash
# List failed runs
depot ci run list --status failed

# List finished and failed runs
depot ci run list --status finished --status failed

# List the 5 most recent runs
depot ci run list -n 5
```

### Check CI run status with the Depot CLI

The `depot ci status` command looks up the status of a Depot CI run and displays its workflows, jobs, and individual job attempts in a hierarchical view.

#### Get run status

```bash
depot ci status <run-id>
```

Replace `<run-id>` with the run ID returned by `depot ci run` or visible in the Depot dashboard. The command prints:

- The organization and run ID with the overall run status.
- Each workflow in the run, with its status and workflow file path.
- Each job within a workflow, with its job ID, key, and status.
- Each attempt within a job, with its attempt ID, attempt number, and status.

| Flag              | Description                                                                |
| ----------------- | -------------------------------------------------------------------------- |
| `--org <id>`      | Organization ID (required when user is a member of multiple organizations) |
| `--token <token>` | Depot API token                                                            |

### Fetch CI job logs with the Depot CLI

The `depot ci logs` command fetches and prints the log output for a specific CI job attempt.

#### Get job attempt logs

```bash
depot ci logs <attempt-id>
```

Replace `<attempt-id>` with the attempt ID shown in the output of `depot ci status`. The command fetches all log lines for that attempt to stdout.

| Flag              | Description                                                                |
| ----------------- | -------------------------------------------------------------------------- |
| `--org <id>`      | Organization ID (required when user is a member of multiple organizations) |
| `--token <token>` | Depot API token                                                            |

## Get started with Depot CI without using the `migrate` command

If you aren't using the `depot ci migrate` command to get started with Depot CI, you can copy workflows and configure secrets manually.

### Copy your workflows to a Depot folder

In your repository, create a new directory called `.depot`. Copy your workflows manually by duplicating your `.github/workflows/` files into `.depot/workflows/` and any `.github/actions/` files into `.depot/actions/`.

**Note**: Your workflows will run simultaneously in GitHub and Depot. Be mindful of workflows that cause changes in external systems, for example that trigger a deploy or update an important artifact, because they will execute twice.

### Configure secrets and variables with the API

If your workflows use secrets (like `${{ secrets.NPM_TOKEN }}`), and you're not using `depot ci migrate`, then you'll need to configure secrets in Depot CI using the API or the [`depot ci secrets` command](#manage-secrets-with-the-depot-cli).

You need an [organization token](/docs/api/authentication) (`DEPOT_TOKEN`) to authenticate.

To add a secret:

```bash
curl -X POST https://api.depot.dev/depot.ci.v1.SecretService/AddSecret \
  -H "Authorization: Bearer ${DEPOT_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "NPM_TOKEN",
    "value": "npm_abc123..."
  }'
```

To add multiple secrets:

```bash
curl -X POST https://api.depot.dev/depot.ci.v1.SecretService/BatchAddSecrets \
  -H "Authorization: Bearer ${DEPOT_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "secrets": [
      {"name": "NPM_TOKEN", "value": "npm_abc123..."},
      {"name": "DATABASE_PASSWORD", "value": "super-secret"}
    ]
  }'
```

Your workflows can access secrets, but you can't read them via the API.

To add variables, for non-secret configuration, use the VariableService API (similar to SecretService) or the [`depot ci vars` command](#manage-variables-with-the-depot-cli). Variables are available via `${{ vars.VARIABLE_NAME }}` and can be read back through the API or CLI, unlike secrets.
